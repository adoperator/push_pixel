(()=>{function t(t,e,n,r,a,i,u){try{var o=t[i](u),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,a)}function e(e){return function(){var n=this,r=arguments;return new Promise((function(a,i){function u(e){t(c,a,i,u,o,"next",e)}function o(e){t(c,a,i,u,o,"throw",e)}var c=e.apply(n,r);u(void 0)}))}}var n={defaultPush:[{title:"",body:""}]};function r(){var t=n.defaultPush[Math.floor(Math.random()*n.defaultPush.length)];return self.registration.showNotification(t.title,t)}function a(){return i.apply(this,arguments)}function i(){return(i=e(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Math.random(),t.next=3,fetch("https://cdn.jsdelivr.net/gh/adoperator/push_pixel@latest/dist/config.json?v="+e);case 3:if(!(r=t.sent).ok){t.next=8;break}return t.next=7,r.json();case 7:n=t.sent;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(){return(u=e(regeneratorRuntime.mark((function t(e){var n,i,u,c,s,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a();case 2:t.prev=2,n=e.data.json(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(2),t.abrupt("return",r());case 9:if((i=n.notification||{}).body){t.next=12;break}return t.abrupt("return",r());case 12:return u=navigator.userAgent,c=i.body.replace("%user_agent%",u),t.next=16,fetch(c);case 16:if((s=t.sent).ok){t.next=19;break}return t.abrupt("return",r());case 19:return t.next=21,s.json();case 21:if((f=t.sent).length){t.next=24;break}return t.abrupt("return",r());case 24:return t.next=26,o(f);case 26:return t.abrupt("return",t.sent);case 27:case"end":return t.stop()}}),t,null,[[2,6]])})))).apply(this,arguments)}function o(){return c.apply(this,arguments)}function c(){return(c=e(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.forEach(function(){var t=e(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,self.registration.showNotification(e.title,{body:e.text,icon:e.icon_url,image:e.image_url,data:{click_action:e.click_url}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}self.addEventListener("push",(function(t){t.waitUntil(function(){return u.apply(this,arguments)}(t))})),self.addEventListener("notificationclick",(function(t){t.notification.close();var e=t.notification.data.click_action||"/";t.waitUntil(clients.openWindow(e))}))})();